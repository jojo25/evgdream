/*
 * angular-ui-router-css
 * https://github.com/harm-less/angular-ui-router-css

 * Version: 0.1.0 - 2017-05-27
 * License: MIT
 */!function(a,b){"use strict";function c(a){return Number(a)===a&&a%1===0}function d(){return"@resource~"+s++}function e(b){return a.isFunction(b)||a.isArray(b)&&a.isFunction(b[b.length-1])}function f(b,f){if(!e(b)){if(a.isString(b)||!b)b={url:b};else if(a.isObject(b)){if(!b.url)return;b.id&&(f=b.id)}c(f)&&(f=d()),b.id=f}return b}function g(b){if(e(b))return b;a.isString(b)&&(b=[b]);var c={};return a.forEach(b,function(a,b){var d=f(a,b);c[d.id]=d}),c}function h(a,c){var d=l.defer();return a.url?a.element=b.loadStylesheet(a.url,function(){d.resolve()},c):d.resolve(),d.promise}function i(b){function c(a){return m.invoke(a,null,s)}t=t.concat(u),u=[],o=null;var d=b.to(),i=[];if(d.data&&d.data.css)for(var j=d.data;null!==j;)i.unshift(j.css),j=Object.getPrototypeOf(j);var s={$transition$:b},v={};a.forEach(i,function(b){e(b)&&(b=g(c(b))),a.extend(v,b)}),v=a.copy(v);var w=[];return a.forEach(v,function(a){if(e(a)&&(a=f(c(a)),console.log("gg",a)),a.url){console.log(a.url);var b=h(a,{insertBefore:n});a.element.disabled=!0,a.promise=b,o||(o=a),w.push(b),u.push(a)}}),k.$broadcast(p+"."+q,u),l.all(w).then(function(){k.$broadcast(p+"."+r)})}function j(){a.forEach(u,function(a){a.element.disabled=!1});for(var b;b=t.pop();)b.element.remove()}a.isUndefined(b.DEBUG)&&(b.DEBUG=!0);var k,l,m,n,o,p="uiRouterCss",q="loadingStarted",r="loadingFinished",s=1,t=[],u=[];a.module("hl.ui.router.css",["ui.router"]).config(["$stateProvider",function(a){a.decorator("data",function(a,b){var c=b(a);return c&&c.css&&(c.css=g(c.css)),c})}]).run(["$rootScope","$state","$transitions","$timeout","$q","$injector",function(a,b,c,d,e,f){k=a,l=e,m=f,c.onBefore(null,function(a){a.addResolvable({token:"@css",resolveFn:function(){return i(a)}})}),c.onSuccess(null,function(){j()})}]).directive("uiCss",function(){return{restrict:"A",link:function(a,b,c){n=b[0]}}}).service("hlUiRouterCss",["$timeout",function(b){this.injectStyleDefinitions=function(c){return c=g(c),b(function(){a.forEach(c,function(a){h(a,{insertBefore:o?o.element:n})})}),function(){a.forEach(c,function(a){a.element.remove()})}}}])}(angular,window);